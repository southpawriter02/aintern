# v0.4.3c: Backup System

**Release Date:** January 16, 2026  
**Type:** Feature (Apply Changes Workflow)  
**Parent:** v0.4.3 Apply Changes Workflow

---

## Overview

v0.4.3c introduces a comprehensive backup system with metadata tracking, integrity verification, and automatic cleanup for the undo workflow.

---

## New Files

| File | Purpose |
|------|---------|
| `Models/BackupInfo.cs` | Backup file information |
| `Models/BackupOptions.cs` | Configuration with presets |
| `Models/BackupStorageInfo.cs` | Storage statistics and health |
| `Services/BackupService.cs` | Full implementation (~500 LOC) |

## Updated Files

| File | Changes |
|------|---------|
| `Interfaces/IBackupService.cs` | Full interface with all operations |

---

## Interface: IBackupService

### Backup Operations
| Method | Description |
|--------|-------------|
| `CreateBackupAsync` | Create backup with hash computation |
| `CreateBackupWithHashAsync` | Create with pre-computed hash |
| `CreateIncrementalBackupAsync` | Skip if content unchanged |

### Restore Operations
| Method | Description |
|--------|-------------|
| `RestoreBackupAsync` | Restore from specific backup |
| `RestoreLatestBackupAsync` | Restore from most recent |

### Query & Storage
| Method | Description |
|--------|-------------|
| `GetBackupsForFile` | Get all backups for a file |
| `GetAllBackups` | Get all backups |
| `GetStorageInfo` | Storage statistics and health |
| `VerifyBackupIntegrityAsync` | Verify single backup |

### Cleanup Operations
| Method | Description |
|--------|-------------|
| `CleanupExpiredBackups` | Delete by age |
| `CleanupByStorageLimitAsync` | Delete to stay under limit |
| `CleanupOrphanedBackupsAsync` | Delete missing metadata |

---

## Features

- **Naming Convention**: `{filename}_{timestamp}_{pathHash}{ext}.backup`
- **Metadata Files**: JSON sidecar with hash, path, timestamps
- **Integrity Verification**: SHA-256 hash comparison
- **Storage Health**: Status enum (Healthy/Warning/Critical)

---

## Tests

- 19 new unit tests in `BackupServiceTests.cs`

---

## Verification

- ✅ Build succeeds (0 errors)
- ✅ 19 tests pass
