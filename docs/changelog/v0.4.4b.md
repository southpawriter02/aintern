# v0.4.4b - File Tree Parser

**Released:** 2026-01-16

## Overview

Implements the File Tree Parser for the Multi-File Creation system. This parser detects and extracts multi-file proposals from LLM responses, including ASCII tree structures, code block correlation, and path analysis.

## New Components

### Enums

| File | Description |
|------|-------------|
| `TreeFormat.cs` | Format types: Standard, AsciiOnly, Indented, Mixed, Unknown |

### Models

| File | Description |
|------|-------------|
| `TreeParseResult.cs` | Parsing result with paths, directories, format, and error info |
| `ParsedTreeNode.cs` | Tree node with hierarchy, path queries, and descendant traversal |
| `FileTreeParserOptions.cs` | Configuration: min files, max depth, structure indicators |

### Interface

| File | Description |
|------|-------------|
| `IFileTreeParser.cs` | Contract for parsing multi-file proposals from LLM content |

### Service

| File | Description |
|------|-------------|
| `FileTreeParser.cs` | Implementation with source-generated regex patterns |

## Key Features

- **Tree Detection**: `ContainsFileTree()` with configurable structure indicators
- **ASCII Parsing**: Handles Unicode (├└│──) and ASCII-only (+|`-)  formats
- **Structured Parsing**: `ParseAsciiTreeStructured()` builds node hierarchy
- **Path Analysis**: `FindCommonRoot()` with longest common prefix algorithm
- **Path Validation**: `IsValidPath()` blocks traversal, absolute paths, invalid chars
- **Description Extraction**: Finds context near structure indicators

## Regex Patterns

| Pattern | Purpose |
|---------|---------|
| `TreeBlockPattern` | Fenced code blocks with tree characters |
| `TreeLinePattern` | Unicode box-drawing tree lines |
| `AsciiTreeLinePattern` | ASCII-only tree lines |
| `SimpleListingPattern` | Indented path listings |
| `RootDirectoryPattern` | Root directory detection |
| `InlineCommentPattern` | `# comment` extraction |

## Testing

- **55 unit tests** across 2 test files
- All tests passing

## Dependencies

- Uses `FileTreeProposal` from v0.4.4a
- Uses `CodeBlock` from v0.4.1
