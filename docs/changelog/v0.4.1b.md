# v0.4.1b: Parser Service

**Date:** 2026-01-15

## Summary

Regex-based parser service for extracting code blocks from LLM responses.

## New Files

### Interface
- [ICodeBlockParserService.cs](file:///Users/turtle1/Documents/GitHub/aintern/src/AIntern.Core/Interfaces/ICodeBlockParserService.cs)

### Events
- [CodeBlockEvents.cs](file:///Users/turtle1/Documents/GitHub/aintern/src/AIntern.Core/Events/CodeBlockEvents.cs)

### Implementation
- [CodeBlockParserService.cs](file:///Users/turtle1/Documents/GitHub/aintern/src/AIntern.Services/CodeBlockParserService.cs)

### Tests
- [CodeBlockParserServiceTests.cs](file:///Users/turtle1/Documents/GitHub/aintern/tests/AIntern.Services.Tests/CodeBlockParserServiceTests.cs)

## Key Features

| Feature | Description |
|---------|-------------|
| Fence Parsing | Regex for ` ```lang:path ` syntax |
| Path Comments | `// File:`, `# File:`, etc. |
| Language Detection | 20+ languages with display names |
| Classification | CompleteFile, Snippet, Command, Config |
| Confidence Scoring | Based on lang, path, block type |

## Regex Patterns
- **FencedBlockPattern**: ` ```(?<lang>...)?(?::(?<path>...))?\n(?<code>...)``` `
- **FileCommentPattern**: `^(?://|#|--|...)File: (?<path>...)$`

## Verification
- ✅ Build: 0 errors
- ✅ Unit tests created (20+)
